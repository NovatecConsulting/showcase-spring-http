:toc:
:toc-title:
:toclevels: 2
:sectnums:

= HTTP/1.1 WebFlux Delegate with Spring WebFlux using WebClient and Connection Pool

This application accepts requests at `GET /delegate/demo/` and forwards this requests to `GET /demo` endpoint of `http11-webflux-server` app using Spring's _WebClient_.

== Quick Start

.Build Image
[source,bash]
----
./gradlew :http11-webflux-delegate:bootBuildImage
----

.Run
[source,bash]
----
SERVER_PORT=8700 ./gradlew :http11-webflux-delegate:bootRun
----

.Query
[source,bash]
----
time curl -v http://localhost:8700/delegate/demo &
----

.Metrics
[source,bash]
----
curl -v http://curl -s http://localhost:8700/actuator/prometheus
----

== Implementation

=== Server

This application accepts _HTTP/1.1_ requests. To provide this capability this application depends `org.springframework.boot:spring-boot-starter-webflux` which in turn depends on `org.springframework.boot:spring-boot-starter-reactor-netty` which uses an embedded _Tomcat_.